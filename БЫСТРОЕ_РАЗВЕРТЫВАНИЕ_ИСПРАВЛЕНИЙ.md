# üöÄ –ë–´–°–¢–†–û–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô ADMIN_INVITATION

## üìã –ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è admin_invitation –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è 
- ‚ùå –ö–Ω–æ–ø–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∑-–∑–∞ —Å—Ç—Ä–æ–≥–æ–≥–æ —É—Å–ª–æ–≤–∏—è React
- ‚úÖ API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üõ†Ô∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

### 1Ô∏è‚É£ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SQL (–µ—Å–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ):**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@80.87.200.23
cd /var/www/1337community.com/

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
psql -d 1337community -f fix_admin_invitations_trigger.sql
psql -d 1337community -f clean_admin_invitation_metadata.sql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
psql -d 1337community -f simple_check_message.sql
```

### 2Ô∏è‚É£ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª frontend/src/components/Message.js
# –ò–ó–ú–ï–ù–ò–¢–¨ —Å—Ç—Ä–æ–∫—É ~349:
# –ò–ó: const canRespondToInvitation = invitationId && message.metadata?.actions;
# –ù–ê: const canRespondToInvitation = invitationId && message.message_type === 'admin_invitation';

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ git –∏–ª–∏ –ø—Ä—è–º–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
git add frontend/src/components/Message.js
git commit -m "Fix admin invitation buttons condition"
git push origin main
```

### 3Ô∏è‚É£ **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
cd /var/www/1337community.com/
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
cd frontend
npm run build
cd ..

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend
pm2 restart 1337-backend
pm2 logs 1337-backend --lines 20
```

### 4Ô∏è‚É£ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
```javascript
// –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –≤—Å–µ –µ—â–µ –Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å, –≤ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:
// –ö–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ force_refresh_message.js –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

## ‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è admin_invitation –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ª–∏—á–Ω—ã–π —á–∞—Ç
- **–ö–Ω–æ–ø–∫–∏ "‚úÖ –ü—Ä–∏–Ω—è—Ç—å" –∏ "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å" –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**  
- –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ API endpoint'—ã
- –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∏ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

## üîß **–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

**React —É—Å–ª–æ–≤–∏–µ (frontend/src/components/Message.js ~349):**
```javascript
// –ë–´–õ–û:
const canRespondToInvitation = invitationId && message.metadata?.actions;

// –°–¢–ê–õ–û:  
const canRespondToInvitation = invitationId && message.message_type === 'admin_invitation';
```

**API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (—É–∂–µ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):**
```javascript
if (message.message_type === 'admin_invitation' && message.metadata?.invitation_id) {
    const invitationId = message.metadata.invitation_id;
    const endpoint = actionType === 'accept' ? 'accept' : 'decline';
    
    response = await axios.post(
        `/api/tournaments/admin-invitations/${invitationId}/${endpoint}`,
        // ...
    );
}
```

## üö® **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:**

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ DOM:**
```javascript
// –ö–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ add_buttons_manually.js 
// –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤—Ä—É—á–Ω—É—é –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è React
```

**–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```javascript  
// –ö–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ force_refresh_message.js
// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ API
```

## üìä **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ü–æ–ª—É—á–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ
3. –ö–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å API –∑–∞–ø—Ä–æ—Å—ã
4. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏—è

---
*–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é! üéØ*