# üîí –ó–∞—â–∏—Ç–∞ Match Configs –æ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

JSON –∫–æ–Ω—Ñ–∏–≥–∏ –º–∞—Ç—á–µ–π (—Ä–æ—É—Ç `/lobby/:lobbyId/:file.json`) —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã **–¢–û–õ–¨–ö–û** –¥–ª—è CS2 —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ IP –∏–∑ —Ñ–∞–π–ª–∞ `.env`.

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ VDS

### 1. –î–æ–±–∞–≤–∏—Ç—å IP —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ .env

```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@80.87.200.23

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ backend
cd /var/www/1337community.com/backend

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env (–¥–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É —Å IP —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
nano .env
```

**–î–æ–±–∞–≤—å –≤ `.env`:**
```env
# IP –∞–¥—Ä–µ—Å–∞ CS2 —Å–µ—Ä–≤–µ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
CS2_SERVER_IPS=80.87.200.23,95.123.45.67,192.168.1.100
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- –û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä: `CS2_SERVER_IPS=80.87.200.23`
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤: `CS2_SERVER_IPS=80.87.200.23,95.123.45.67,192.168.1.100`

### 2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
cd /var/www/1337community.com

# –ü—É–ª–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º backend
pm2 restart 1337-backend

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
pm2 logs 1337-backend --lines 50
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚ùå –î–æ—Å—Ç—É–ø —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ IP (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 403)
```bash
curl https://1337community.com/lobby/123/test.json
# –û—Ç–≤–µ—Ç: {"error":"Access denied","message":"Only authorized CS2 servers can access match configs"}
```

### ‚úÖ –î–æ—Å—Ç—É–ø —Å IP —Å–µ—Ä–≤–µ—Ä–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç)
–ö–æ–≥–¥–∞ CS2 —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ `matchzy_loadmatch_url`, –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç —Å –µ–≥–æ IP, —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ `.env`.

## üìù –õ–æ–≥–∏

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ `/lobby` –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç:
```
üîç [ServerAuth] –ü—Ä–æ–≤–µ—Ä–∫–∞ IP: 80.87.200.23
üîç [ServerAuth] –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IPs: 80.87.200.23, 127.0.0.1, ::1, localhost
‚úÖ [ServerAuth] –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è IP: 80.87.200.23
```

–ò–ª–∏ –ø—Ä–∏ –∑–∞–ø—Ä–µ—Ç–µ:
```
‚õî [ServerAuth] –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω –¥–ª—è IP: 192.168.1.100
```

## üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö CS2 —Å–µ—Ä–≤–µ—Ä–æ–≤

–ß—Ç–æ–±—ã –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –º–æ–≥ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ñ–∏–≥–∞–º, –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å –µ–≥–æ IP –≤ `.env`:

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env
nano /var/www/1337community.com/backend/.env

# –î–æ–±–∞–≤–ª—è–µ–º IP —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
CS2_SERVER_IPS=80.87.200.23,–ù–û–í–´–ô_IP_–°–ï–†–í–ï–†–ê

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º backend
pm2 restart 1337-backend
```

**–ì–æ—Ç–æ–≤–æ!** –ë–µ–∑ SQL, –±–µ–∑ –ë–î - –ø—Ä–æ—Å—Ç–æ —Ñ–∞–π–ª.

