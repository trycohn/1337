# Настройка STRATZ API для статистики Dota 2

## Переход с OpenDota на STRATZ API

Проект обновлен для использования более мощного STRATZ API вместо OpenDota API.

## Получение API токена

1. Перейдите на https://stratz.com/
2. Зарегистрируйтесь или войдите в аккаунт
3. Перейдите в раздел API: https://stratz.com/api
4. Создайте новый API токен
5. Скопируйте полученный токен

## Настройка переменных окружения

Добавьте в файл `.env` в папке `backend`:

```env
# STRATZ API для Dota 2 статистики
STRATZ_API_TOKEN=your_stratz_api_token_here
```

## Особенности STRATZ API

### Преимущества по сравнению с OpenDota:
- ✅ Более богатая статистика игроков
- ✅ Лучшая производительность запросов 
- ✅ Поддержка behavior score
- ✅ Детальная статистика по героям (avg kills/deaths/assists, GPM, XPM)
- ✅ Расширенная статистика матчей (wards, stacks, runes)
- ✅ GraphQL API с гибкими запросами
- ✅ Точные данные о профессиональных матчах
- ✅ Современная архитектура и лучшая документация

### Новые поля в API ответах:
- `behavior_score` - поведенческий рейтинг игрока
- `mvp_count` - количество MVP наград
- `top_core_count` - количество раз лучший керри
- `top_support_count` - количество раз лучший саппорт
- `avg_kills/deaths/assists` - средние показатели по героям
- `avg_gpm/xpm` - средний GPM/XPM по героям
- Расширенная статистика матчей с вардами, стаками и рунами

## Команды для развертывания

На сервере выполнить:

```bash
# Перезапуск backend сервиса
sudo systemctl restart 1337-backend

# Проверка логов
sudo journalctl -u 1337-backend -f

# Перезагрузка nginx (если нужно)
sudo systemctl reload nginx
```

## Тестирование

После настройки токена можно протестировать API:

```bash
# Тест получения статистики игрока
curl -X GET "https://1337community.com/api/dota-stats/player/76561198000000000"
```

## Миграция данных

Структура ответов API совместима с существующим frontend кодом, поэтому дополнительные изменения не требуются.

## Лимиты API

STRATZ API имеет лимиты запросов. При превышении лимитов используйте кэширование или оптимизируйте количество запросов. 