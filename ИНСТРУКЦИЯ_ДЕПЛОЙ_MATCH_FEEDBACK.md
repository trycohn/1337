# üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –î–ï–ü–õ–û–Æ: MATCH FEEDBACK –°–ò–°–¢–ï–ú–ê

**–î–∞—Ç–∞:** 2 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0 (Basic Post-Match Feedback)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ**

---

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (–ü–û–õ–ù–û–°–¢–¨–Æ)

### Backend (100% –≥–æ—Ç–æ–≤):
```
‚úÖ backend/migrations/20251002_create_match_feedback_system.sql
   ‚Ä¢ 5 —Ç–∞–±–ª–∏—Ü (match_feedback, player_reputation, etc)
   ‚Ä¢ –§—É–Ω–∫—Ü–∏—è update_player_reputation()
   
‚úÖ backend/routes/matchFeedback.js
   ‚Ä¢ 4 API endpoints
   
‚úÖ backend/server.js
   ‚Ä¢ –ü–æ–¥–∫–ª—é—á–µ–Ω matchFeedbackRouter
   
‚úÖ backend/services/tournament/MatchService.js
   ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ pending feedback –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∞—Ç—á–∞
```

### Frontend (100% –≥–æ—Ç–æ–≤):
```
‚úÖ frontend/src/components/feedback/FeedbackPromptModal.js
‚úÖ frontend/src/components/feedback/FeedbackPromptModal.css
‚úÖ frontend/src/components/feedback/PostMatchFeedbackModal.js
‚úÖ frontend/src/components/feedback/PostMatchFeedbackModal.css
‚úÖ frontend/src/components/feedback/MatchFeedbackManager.js
‚úÖ frontend/src/components/feedback/index.js

‚úÖ frontend/src/components/tournament/MatchDetailsPage.js
   ‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω MatchFeedbackManager
```

---

## üöÄ –ü–†–û–¶–ï–î–£–†–ê –î–ï–ü–õ–û–Ø (10 –º–∏–Ω—É—Ç)

### –®–ê–ì 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@80.87.200.23
# –ü–∞—Ä–æ–ª—å: 01012006Fortnite!
```

### –®–ê–ì 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
cd /var/www/1337community.com/

# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
cp -r backend backend_feedback_backup_$(date +%Y%m%d_%H%M%S)
cp -r frontend frontend_feedback_backup_$(date +%Y%m%d_%H%M%S)

# –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥
git pull origin main
```

### –®–ê–ì 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é feedback —Å–∏—Å—Ç–µ–º—ã
sudo -u postgres psql -d tournament_db -f backend/migrations/20251002_create_match_feedback_system.sql
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE INDEX
...
CREATE FUNCTION
NOTICE: ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è Post-Match Feedback —Å–∏—Å—Ç–µ–º—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞!
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:**
```bash
sudo -u postgres psql -d tournament_db -c "\dt match_feedback*"
sudo -u postgres psql -d tournament_db -c "\dt player_reputation"
sudo -u postgres psql -d tournament_db -c "\dt user_coins"
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
 match_feedback
 match_feedback_pending
 player_reputation
 user_coins
 coin_transactions
```

### –®–ê–ì 4: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ frontend

```bash
cd /var/www/1337community.com/frontend

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
npm run build
```

**–û–∂–∏–¥–∞–µ–º–æ:** Build –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### –®–ê–ì 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ nginx
sudo cp -r /var/www/1337community.com/frontend/build/* /var/www/html/1337community/
```

### –®–ê–ì 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ PM2
pm2 restart 1337-backend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫)
pm2 logs 1337-backend --lines 50
```

**–û–∂–∏–¥–∞–µ–º–æ –≤ –ª–æ–≥–∞—Ö:**
```
‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```

### –®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

#### A) –ü—Ä–æ–≤–µ—Ä–∫–∞ API:

```bash
# 1. –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:3000/

# –û–∂–∏–¥–∞–µ–º–æ: {"message":"–°–µ—Ä–≤–µ—Ä 1337 Community API —Ä–∞–±–æ—Ç–∞–µ—Ç!"}

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ (–ø—É–±–ª–∏—á–Ω—ã–π endpoint)
curl http://localhost:3000/api/matches/users/1/reputation | jq

# –û–∂–∏–¥–∞–µ–º–æ:
# {
#   "success": true,
#   "reputation": {
#     "user_id": 1,
#     "reputation_index": 50,
#     ...
#   }
# }
```

#### B) –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://1337community.com
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –º–∞—Ç—á
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)
4. **–û–∂–∏–¥–∞–µ–º–æ:** –ß–µ—Ä–µ–∑ 1.5 —Å–µ–∫ –ø–æ—è–≤–∏—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ "–•–æ—Ç–∏—Ç–µ –æ—Ü–µ–Ω–∏—Ç—å –º–∞—Ç—á?"

---

## üß™ –ü–û–õ–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ—Å—Ç 1: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª feedback

```bash
1. –ö–∞–∫ –∞–¥–º–∏–Ω/—Å–æ–∑–¥–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ª—é–±–æ–π –º–∞—Ç—á —Ç—É—Ä–Ω–∏—Ä–∞
   (–∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –º–∞—Ç—á)

2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1.5 —Å–µ–∫—É–Ω–¥—ã

3. –û–∂–∏–¥–∞–µ–º–æ: –ü–æ—è–≤–∏—Ç—Å—è –º–æ–¥–∞–ª–∫–∞
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   üìä                       ‚îÇ
   ‚îÇ –•–æ—Ç–∏—Ç–µ –æ—Ü–µ–Ω–∏—Ç—å –º–∞—Ç—á?       ‚îÇ
   ‚îÇ [‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å] [‚úÖ –û—Ü–µ–Ω–∏—Ç—å]‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

4. –ù–∞–∂–º–∏—Ç–µ "‚úÖ –û—Ü–µ–Ω–∏—Ç—å –º–∞—Ç—á"

5. –û–∂–∏–¥–∞–µ–º–æ: –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ —Å —Å–æ–ø–µ—Ä–Ω–∏–∫–∞–º–∏ –∏ —Ç–∏–º–º–µ–π—Ç–∞–º–∏

6. –û—Ü–µ–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ (–∫–ª–∏–∫–∞–π—Ç–µ –Ω–∞ —ç–º–æ–¥–∂–∏)

7. –ù–∞–∂–º–∏—Ç–µ "‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å feedback"

8. –û–∂–∏–¥–∞–µ–º–æ: Alert
   "‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ feedback! –í–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω–æ 20 coins ü™ô
    
    –û—Ü–µ–Ω–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ: 2
    –ù–∞—á–∏—Å–ª–µ–Ω–æ coins: 20"

9. –ú–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä–æ–µ—Ç—Å—è

10. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

11. –û–∂–∏–¥–∞–µ–º–æ: –ú–æ–¥–∞–ª–∫–∞ –±–æ–ª—å—à–µ –ù–ï –ø–æ—è–≤–∏—Ç—Å—è (feedback —É–∂–µ –¥–∞–Ω)
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ feedback
sudo -u postgres psql -d tournament_db -c "
SELECT 
    mf.id,
    u1.username as reviewer,
    u2.username as reviewed,
    mf.fairness_rating,
    mf.behavior_rating,
    mf.coins_rewarded
FROM match_feedback mf
JOIN users u1 ON u1.id = mf.reviewer_id
JOIN users u2 ON u2.id = mf.reviewed_id
ORDER BY mf.created_at DESC
LIMIT 5;
"

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ coins
sudo -u postgres psql -d tournament_db -c "
SELECT 
    uc.user_id,
    u.username,
    uc.balance,
    uc.lifetime_earned
FROM user_coins uc
JOIN users u ON u.id = uc.user_id
ORDER BY uc.updated_at DESC
LIMIT 5;
"

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é
sudo -u postgres psql -d tournament_db -c "
SELECT 
    pr.user_id,
    u.username,
    pr.reputation_index,
    pr.total_feedbacks,
    pr.cheating_reports,
    pr.suspicious_reports
FROM player_reputation pr
JOIN users u ON u.id = pr.user_id
ORDER BY pr.updated_at DESC
LIMIT 5;
"
```

### –¢–µ—Å—Ç 3: –õ–æ–≥–∏

```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs 1337-backend --lines 0

# –í –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ: –∑–∞–≤–µ—Ä—à–∏—Ç–µ –º–∞—Ç—á –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π

# –û–∂–∏–¥–∞–µ–º–æ –≤ –ª–æ–≥–∞—Ö:
üìù [Match Feedback] –°–æ–∑–¥–∞–Ω–æ 10 pending feedback –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –º–∞—Ç—á–∞ 123
üìù [Match Feedback] User 45 submitting feedback for match 123
üí∞ [Match Feedback] –ù–∞—á–∏—Å–ª–µ–Ω–æ 20 coins –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 45
üìä [Match Feedback] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 67
üìä [Match Feedback] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 89
‚úÖ [Match Feedback] –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ 2 feedbacks, –Ω–∞—á–∏—Å–ª–µ–Ω–æ 20 coins
```

---

## üîß –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "–¢–∞–±–ª–∏—Ü–∞ match_feedback –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

**–°–∏–º–ø—Ç–æ–º—ã:**
```
ERROR: relation "match_feedback" does not exist
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ
sudo -u postgres psql -d tournament_db -f backend/migrations/20251002_create_match_feedback_system.sql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
sudo -u postgres psql -d tournament_db -c "\d match_feedback"
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ú–æ–¥–∞–ª–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
1. Frontend –Ω–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω
2. –°—Ç–∞—Ç–∏–∫–∞ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
3. –ö–µ—à –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å frontend
cd /var/www/1337community.com/frontend
npm run build

# 2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏–∫—É
sudo cp -r build/* /var/www/html/1337community/

# 3. –í –±—Ä–∞—É–∑–µ—Ä–µ: Ctrl+Shift+R (hard reload)
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "Failed to get participants"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ –º–∞—Ç—á–µ

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ:** –ú–æ–¥–∞–ª–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–º –∫—Ç–æ –æ—Ç–∫—Ä—ã–ª –º–∞—Ç—á, –Ω–æ feedback –º–æ–≥—É—Ç –¥–∞—Ç—å —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —É—á–∞—Å—Ç–∏—è –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –º–æ–¥–∞–ª–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Backend –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏
pm2 logs 1337-backend --err

# –ï—Å–ª–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ matchFeedback.js
cd /var/www/1337community.com/backend
node routes/matchFeedback.js

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
pm2 delete 1337-backend
pm2 start server.js --name 1337-backend
pm2 save
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### –ü–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞:

**1. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏:**
```bash
pm2 logs 1337-backend | grep "Match Feedback"
```

–ò—â–∏—Ç–µ:
- ‚úÖ `–°–æ–∑–¥–∞–Ω–æ X pending feedback –∑–∞–ø—Ä–æ—Å–æ–≤` ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `User X submitting feedback` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç
- ‚úÖ `–ù–∞—á–∏—Å–ª–µ–Ω–æ X coins` ‚Äî rewards —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ö†Ô∏è –û—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

**2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ë–î:**
```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ feedbacks
sudo -u postgres psql -d tournament_db -c "
SELECT COUNT(*) as total_feedbacks FROM match_feedback;
"

-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ pending
sudo -u postgres psql -d tournament_db -c "
SELECT 
    COUNT(*) as total,
    COUNT(CASE WHEN feedback_given = true THEN 1 END) as completed,
    COUNT(CASE WHEN feedback_given = false THEN 1 END) as pending
FROM match_feedback_pending;
"
```

**3. Completion rate:**
```sql
-- –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
sudo -u postgres psql -d tournament_db -c "
SELECT 
    ROUND(
        100.0 * COUNT(CASE WHEN feedback_given THEN 1 END) / COUNT(*),
        2
    ) as completion_rate_percent
FROM match_feedback_pending;
"

-- –û–∂–∏–¥–∞–µ–º–æ: 30-50% –≤ –ø–µ—Ä–≤—ã–µ –¥–Ω–∏
```

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞:
- ‚úÖ 10-20 feedbacks —Å–æ–±—Ä–∞–Ω–æ
- ‚úÖ 5-10 –∏–≥—Ä–æ–∫–æ–≤ –æ—Ü–µ–Ω–µ–Ω–æ
- ‚úÖ 100-200 coins —Ä–æ–∑–¥–∞–Ω–æ
- ‚úÖ Completion rate: 25-40%

### –ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è:
- üìä 50-100 feedbacks
- üë• 20-30 –∏–≥—Ä–æ–∫–æ–≤ —Å —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π
- üí∞ 500-1000 coins —Ä–æ–∑–¥–∞–Ω–æ
- üö® 0-2 –∏–≥—Ä–æ–∫–∞ –∑–∞—Ñ–ª–∞–≥–∞–Ω–æ (3+ cheating reports)
- üìà Completion rate: 30-50%

### –ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü:
- üìä 500-1000 feedbacks
- üë• 150-200 –∏–≥—Ä–æ–∫–æ–≤ —Å —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π
- üí∞ 5000-10000 coins —Ä–æ–∑–¥–∞–Ω–æ
- üö® 5-10 –∏–≥—Ä–æ–∫–æ–≤ –∑–∞—Ñ–ª–∞–≥–∞–Ω–æ
- üìâ –°–Ω–∏–∂–µ–Ω–∏–µ –∂–∞–ª–æ–± –Ω–∞ —á–∏—Ç–µ—Ä–æ–≤ –Ω–∞ 30-40%

---

## üéØ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:

```
1. –ò–≥—Ä–æ–∫ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç –º–∞—Ç—á –∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –º–∞—Ç—á
   ‚Üì
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: –¥–∞–ª –ª–∏ feedback?
   ‚îú‚îÄ –î–∞ ‚Üí –ù–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
   ‚îî‚îÄ –ù–µ—Ç ‚Üí –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
       ‚Üì
3. –ó–∞–¥–µ—Ä–∂–∫–∞ 1.5 —Å–µ–∫—É–Ω–¥—ã (—á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
   ‚Üì
4. –ú–û–î–ê–õ–ö–ê 1: "–•–æ—Ç–∏—Ç–µ –æ—Ü–µ–Ω–∏—Ç—å –º–∞—Ç—á?"
   ‚îú‚îÄ [‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å] ‚Üí –ó–∞–∫—Ä—ã—Ç—å, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
   ‚îî‚îÄ [‚úÖ –û—Ü–µ–Ω–∏—Ç—å] ‚Üí –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
       ‚Üì
5. –ú–û–î–ê–õ–ö–ê 2: –§–æ—Ä–º–∞ –æ—Ü–µ–Ω–∫–∏
   ‚îú‚îÄ –û—Ü–µ–Ω–∏—Ç—å —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤ (—á–µ—Å—Ç–Ω–æ—Å—Ç—å + –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
   ‚îú‚îÄ –û—Ü–µ–Ω–∏—Ç—å —Ç–∏–º–º–µ–π—Ç–æ–≤ (–∫–æ–º–∞–Ω–¥–Ω–æ—Å—Ç—å + –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è)
   ‚îî‚îÄ [‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å]
       ‚Üì
6. Backend:
   ‚îú‚îÄ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –æ—Ü–µ–Ω–∫–∏
   ‚îú‚îÄ –ù–∞—á–∏—Å–ª–∏—Ç—å 10 coins –∑–∞ –∫–∞–∂–¥—É—é –æ—Ü–µ–Ω–∫—É
   ‚îú‚îÄ –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é –æ—Ü–µ–Ω–µ–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
   ‚îî‚îÄ –û—Ç–º–µ—Ç–∏—Ç—å feedback_given = true
       ‚Üì
7. Alert: "–°–ø–∞—Å–∏–±–æ! –ù–∞—á–∏—Å–ª–µ–Ω–æ X coins ü™ô"
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:

```
–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –º–∞—Ç—á–∞ (MatchService):
  ‚Üì
–°–æ–∑–¥–∞—é—Ç—Å—è pending –∑–∞–ø–∏—Å–∏ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  ‚Üì
–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–∞—Ç—á–∞ (MatchDetailsPage):
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞: feedback_given?
  ‚îú‚îÄ false ‚Üí –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª–∫—É
  ‚îî‚îÄ true ‚Üí –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
```

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –ë–î

### –ö–ª—é—á–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

```sql
match_feedback (–æ—Å–Ω–æ–≤–Ω–∞—è)
‚îú‚îÄ reviewer_id ‚Üí –∫—Ç–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç
‚îú‚îÄ reviewed_id ‚Üí –∫–æ–≥–æ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç
‚îú‚îÄ fairness_rating ‚Üí —á–µ—Å—Ç–Ω–æ—Å—Ç—å (clean/normal/suspicious/cheating)
‚îú‚îÄ behavior_rating ‚Üí –ø–æ–≤–µ–¥–µ–Ω–∏–µ (excellent/good/normal/toxic)
‚îî‚îÄ coins_rewarded ‚Üí –Ω–∞–≥—Ä–∞–¥–∞ (10 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

player_reputation (–∞–≥—Ä–µ–≥–∞—Ü–∏—è)
‚îú‚îÄ user_id
‚îú‚îÄ total_feedbacks ‚Üí –≤—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫
‚îú‚îÄ reputation_index ‚Üí 0-100 (–≥–ª–∞–≤–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å)
‚îú‚îÄ fairness_score ‚Üí 0-100
‚îú‚îÄ behavior_score ‚Üí 0-100
‚îî‚îÄ cheating_reports ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–ª–æ–± –Ω–∞ —á–∏—Ç–∏–Ω–≥

user_coins (–±–∞–ª–∞–Ω—Å)
‚îú‚îÄ user_id
‚îú‚îÄ balance ‚Üí —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
‚îî‚îÄ lifetime_earned ‚Üí –≤—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ

match_feedback_pending (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ)
‚îú‚îÄ match_id
‚îú‚îÄ user_id
‚îî‚îÄ feedback_given ‚Üí —Ñ–ª–∞–≥ (true/false)
```

---

## üîç –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### 1. API endpoints:

```bash
TOKEN="–≤–∞—à_jwt_—Ç–æ–∫–µ–Ω"

# –ü–æ–ª—É—á–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –º–∞—Ç—á–∞
curl -H "Authorization: Bearer $TOKEN" \
     "http://localhost:3000/api/matches/123/feedback/participants" | jq

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å feedback (—Ç–µ—Å—Ç–æ–≤—ã–π)
curl -X POST \
     -H "Authorization: Bearer $TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"feedbacks":[{"reviewed_id":45,"fairness_rating":"clean"}]}' \
     "http://localhost:3000/api/matches/123/feedback" | jq

# –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é
curl "http://localhost:3000/api/matches/users/45/reputation" | jq
```

### 2. Frontend:

```
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –º–∞—Ç—á:
   https://1337community.com/tournaments/42/match/123

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DevTools Console (F12)
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: –ù–µ—Ç –æ—à–∏–±–æ–∫

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network (–≤–∫–ª–∞–¥–∫–∞ XHR)
   –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å: /api/matches/123/feedback/check

4. –ú–æ–¥–∞–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫
```

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

```sql
-- –í—Å–µ –ª–∏ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã?
\dt match_feedback*
\dt player_reputation
\dt user_coins

-- –ï—Å—Ç—å –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è?
\df update_player_reputation

-- –ü–µ—Ä–≤—ã–µ pending –∑–∞–ø–∏—Å–∏
SELECT * FROM match_feedback_pending LIMIT 5;
```

---

## üîÑ –û–¢–ö–ê–¢ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫)

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
pm2 stop 1337-backend

# 2. –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥
cd /var/www/1337community.com/
mv backend backend_broken
mv backend_feedback_backup_–î–ê–¢–ê backend

mv frontend frontend_broken
mv frontend_feedback_backup_–î–ê–¢–ê frontend

# 3. –û—Ç–∫–∞—Ç–∏—Ç—å –ë–î
sudo -u postgres psql -d tournament_db -c "
DROP TABLE IF EXISTS match_feedback_pending CASCADE;
DROP TABLE IF EXISTS match_feedback CASCADE;
DROP TABLE IF EXISTS player_reputation CASCADE;
DROP TABLE IF EXISTS coin_transactions CASCADE;
DROP TABLE IF EXISTS user_coins CASCADE;
DROP FUNCTION IF EXISTS update_player_reputation(INTEGER);
"

# 4. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å frontend
cd frontend && npm run build
sudo cp -r build/* /var/www/html/1337community/

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart 1337-backend
```

---

## üìà –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

**–î–µ–Ω—å 1:**
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–¥–∞–ª–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è
- ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ coins –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è

**–ù–µ–¥–µ–ª—è 1:**
- ‚úÖ –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É completion rate
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–≤—ã–µ —Ä–µ–ø–æ—Ä—Ç—ã –Ω–∞ —á–∏—Ç–∏–Ω–≥
- ‚úÖ –û–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω—Ä–∞–≤–∏—Ç—Å—è –ª–∏ —Å–∏—Å—Ç–µ–º–∞?)

**–ú–µ—Å—è—Ü 1:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ abuse (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Phase 2 (Weighted Voting)

---

## ‚úÖ CHECKLIST –ì–û–¢–û–í–ù–û–°–¢–ò

```markdown
Backend:
‚òë –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
‚òë API endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
‚òë Router –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ server.js
‚òë MatchService –æ–±–Ω–æ–≤–ª–µ–Ω (—Å–æ–∑–¥–∞–Ω–∏–µ pending)

Frontend:
‚òë –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã (6 —Ñ–∞–π–ª–æ–≤)
‚òë –°—Ç–∏–ª–∏ –≥–æ—Ç–æ–≤—ã (–º–æ–Ω–æ—Ö—Ä–æ–º–Ω–∞—è —Ç–µ–º–∞)
‚òë MatchFeedbackManager –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ MatchDetailsPage

Database:
‚òë –°—Ö–µ–º–∞ –≥–æ—Ç–æ–≤–∞ (5 —Ç–∞–±–ª–∏—Ü + —Ñ—É–Ω–∫—Ü–∏—è)
‚òë –ò–Ω–¥–µ–∫—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
‚òë –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã

Testing:
‚òê –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é ‚Üê –°–î–ï–õ–ê–¢–¨
‚òê –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å frontend ‚Üê –°–î–ï–õ–ê–¢–¨
‚òê –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend ‚Üê –°–î–ï–õ–ê–¢–¨
‚òê –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Üê –°–î–ï–õ–ê–¢–¨
```

---

## üí° –í–ê–ñ–ù–û –ó–ù–ê–¢–¨

### 1. –ú–æ–¥–∞–ª–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –í–°–ï–ú –∫—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –º–∞—Ç—á

–≠—Ç–æ by design, –Ω–æ feedback –º–æ–≥—É—Ç –¥–∞—Ç—å —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏.

### 2. Feedback –º–æ–∂–Ω–æ –¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ –º–∞—Ç—á

–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ —á–µ—Ä–µ–∑ `UNIQUE(match_id, reviewer_id, reviewed_id)`

### 3. Coins –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ feedback

### 4. –†–µ–ø—É—Ç–∞—Ü–∏—è –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ß–µ—Ä–µ–∑ PostgreSQL —Ñ—É–Ω–∫—Ü–∏—é `update_player_reputation()`

### 5. –ü–µ—Ä–≤–∞—è –º–æ–¥–∞–ª–∫–∞ –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤–∞—è

–ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–∫—Ä—ã—Ç—å (–∫–ª–∏–∫ –≤–Ω–µ –º–æ–¥–∞–ª–∫–∏ –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å")

---

## üéâ –ì–û–¢–û–í–û!

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞:

- üéÆ –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ (–∫–∞–∫ –≤—ã —Ö–æ—Ç–µ–ª–∏)
- üí∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ rewards (coins)
- üìä –†–µ–ø—É—Ç–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤
- üõ°Ô∏è –î–µ—Ç–µ–∫—Ü–∏—è —á–∏—Ç–µ—Ä–æ–≤ (—á–µ—Ä–µ–∑ cheating reports)
- üé® –ú–æ–Ω–æ—Ö—Ä–æ–º–Ω—ã–π –¥–∏–∑–∞–π–Ω
- üì± Responsive (–¥–µ—Å–∫—Ç–æ–ø + –º–æ–±–∞–π–ª)

### üöÄ –í—Ä–µ–º—è –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞: 10 –º–∏–Ω—É—Ç

**–ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ!**

---

**–î–æ–∫—É–º–µ–Ω—Ç:** 2 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ 100% READY FOR DEPLOYMENT  
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∑–∞:** 2 —á–∞—Å–∞

üéÆ **–£–¥–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è!**

