# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VDS —Å–µ—Ä–≤–µ—Ä–µ

## üìã –ü—Ä–æ–±–ª–µ–º–∞
- **–û—à–∏–±–∫–∞**: `ReferenceError: Cannot access 'D' before initialization`
- **–°–∏–º–ø—Ç–æ–º—ã**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —Ç—É—Ä–Ω–∏—Ä–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –≤ –∫–æ–¥–µ

## üöÄ –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@80.87.200.23
# –ü–∞—Ä–æ–ª—å: 01012006Fortnite!
```

### 2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
```bash
cd /var/www/1337community.com/
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
git status
git log --oneline -5
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å GitHub
```bash
git pull origin main
```

### 5. –°–±–æ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ frontend
```bash
npm run build
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend —Å–µ—Ä–≤–∏—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
systemctl restart 1337-backend
systemctl status 1337-backend
```

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
systemctl reload nginx
systemctl status nginx
```

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç—É—Ä–Ω–∏—Ä –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- URL: `https://1337community.com/tournament/59`
- –ò–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä

### 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–£—á–∞—Å—Ç–Ω–∏–∫–∏"

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
- ‚úÖ **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å**: –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ `Cannot access before initialization`
- ‚úÖ **–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å**: –§–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, —Ç–∞–±—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∞–±–∞–º–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å—É/—Ä–µ–π—Ç–∏–Ω–≥—É
- –ü–æ–∏—Å–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏: `ReferenceError: Cannot access 'D' before initialization`
- ‚ùå –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚ùå –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞"

### ‚úÖ –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –í—Å–µ —Ç–∞–±—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

## üîß –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã
- `frontend/src/components/tournament/UnifiedParticipantsPanel.js`

## üìù –°—É—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–ü–µ—Ä–µ–º–µ—â–µ–Ω—ã —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`getRating`, `getRatingClass`, `formatRating`, `getStatusBadge`) –ø–µ—Ä–µ–¥ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ `useMemo`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ "Cannot access before initialization" –ø—Ä–∏ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ production –∫–æ–¥–∞.

---
**üéØ –°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–º—É —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
**‚è±Ô∏è –í—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**: ~5 –º–∏–Ω—É—Ç
**üö® –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Ñ—É–Ω–∫—Ü–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤) 

# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï Socket.IO - Connection Refused

## üìä –î–ò–ê–ì–ù–û–ó –ü–†–û–ë–õ–ï–ú–´:

–ò–∑ –ª–æ–≥–æ–≤ –≤—ã—è–≤–ª–µ–Ω–∞ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: Socket.IO –∑–∞–ø—Ä–æ—Å—ã **–ù–ï –¥–æ—Ö–æ–¥—è—Ç –¥–æ backend**.

### ‚ùå **–°–∏–º–ø—Ç–æ–º—ã:**
```bash
# Nginx –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:
connect() failed (111: Connection refused) while connecting to upstream

# Access –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:
GET /socket.io/?token=... HTTP/1.1" 400 11

# Backend –ª–æ–≥–∏ –ù–ï —Å–æ–¥–µ—Ä–∂–∞—Ç:
- –°–æ–æ–±—â–µ–Ω–∏–π –æ Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è—Ö
- –û—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Socket.IO
- –í–æ–æ–±—â–µ –ª—é–±—ã—Ö Socket.IO –ª–æ–≥–æ–≤
```

### üîç **–ü—Ä–∏—á–∏–Ω–∞:**
Socket.IO —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–ª–∏ –ø–∞–¥–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

## üõ†Ô∏è **–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Socket.IO:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –¢–µ—Å—Ç–æ–≤—ã–π endpoint `/test-socketio`

### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
```javascript
// –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Socket.IO
io.engine.on('connection_error', (err) => {
  console.log('‚ùå Socket.IO connection_error:', err);
});
```

## üöÄ **–ö–û–ú–ê–ù–î–´ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø:**

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@80.87.200.23

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/1337community.com

# 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull origin main

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend —Å –ø–æ–ª–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
pm2 restart 1337-backend
pm2 logs 1337-backend --lines 50

# 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Socket.IO –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
curl https://1337community.com/test-socketio

# 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs 1337-backend --follow
```

## üéØ **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:**

### ‚úÖ –í –ª–æ–≥–∞—Ö backend –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üîå –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Socket.IO —Å–µ—Ä–≤–µ—Ä–∞...
‚úÖ Socket.IO —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–Ω
üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Socket.IO...
‚úÖ Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Socket.IO –Ω–∞—Å—Ç—Ä–æ–µ–Ω
üîå –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Ç–∞ —á–µ—Ä–µ–∑ Socket.IO...
‚úÖ –ß–∞—Ç Socket.IO –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚úÖ Socket.IO —ç–∫–∑–µ–º–ø–ª—è—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ app
üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Socket.IO...
‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Socket.IO –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
‚úÖ Socket.IO –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
```

### ‚úÖ –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞:
```
üîç Socket.IO: –ø–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
üîç Socket.IO: –ø—Ä–æ–≤–µ—Ä—è–µ–º JWT —Ç–æ–∫–µ–Ω...
üîç Socket.IO: –∏—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...
‚úÖ Socket.IO: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å [username] (ID: [id]) –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
üéâ Socket.IO: –ù–û–í–û–ï –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï! userId = [id]
```

### ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π endpoint –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
```json
{
  "status": "success",
  "message": "Socket.IO —Ä–∞–±–æ—Ç–∞–µ—Ç",
  "clientsCount": 0,
  "transports": ["websocket", "polling"]
}
```

## üîß **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê:**

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:
```bash
curl https://1337community.com/test-socketio
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤:
```bash
ss -tulpn | grep :3000
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å chat-socketio.js:
```bash
# –ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–∞
cat backend/chat-socketio.js
```

### 4. –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–∞—Ç –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã:
```javascript
// –í server.js –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
// setupChatSocketIO(io);
```

## üìÅ **–ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´:**
- `backend/server.js` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Socket.IO
- `deploy_critical_fix.md` - –¥–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**üéØ –¶–ï–õ–¨: –í—ã—è–≤–∏—Ç—å —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –ø–∞–¥–µ–Ω–∏—è Socket.IO –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –µ—ë —Å –ø–æ–º–æ—â—å—é –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤!** 