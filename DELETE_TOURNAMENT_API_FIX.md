# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API endpoint –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞

## üìã –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–¥–∞–ª–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ 404:
```
API Error (404) –Ω–∞ /api/tournaments/55: 
{status: 404, message: '–ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'}
```

## üîç –ü—Ä–∏—á–∏–Ω–∞
–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª DELETE —Ä–æ—É—Ç `/api/tournaments/:id` –≤ —Ñ–∞–π–ª–µ `backend/routes/tournament/index.js`, —Ö–æ—Ç—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä `TournamentController.deleteTournament` —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω DELETE —Ä–æ—É—Ç
**–§–∞–π–ª:** `backend/routes/tournament/index.js`
**–°—Ç—Ä–æ–∫–∞:** –ü–æ—Å–ª–µ `router.post('/', ...)`

```javascript
// üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞
router.delete('/:id', authenticateToken, verifyEmailRequired, verifyAdminOrCreator, TournamentController.deleteTournament);
```

### 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
**–§–∞–π–ª:** `backend/services/tournament/TournamentService.js`
**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `_checkTournamentDeletionAccess`

```javascript
/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —É–¥–∞–ª–µ–Ω–∏—é —Ç—É—Ä–Ω–∏—Ä–∞ (—Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å)
 * @private
 */
static async _checkTournamentDeletionAccess(tournamentId, userId) {
    const tournament = await TournamentRepository.getById(tournamentId);
    if (!tournament) {
        throw new Error('–¢—É—Ä–Ω–∏—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω');
    }

    if (tournament.created_by !== userId) {
        throw new Error('–¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä');
    }
}
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ deleteTournament
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∞ `_checkTournamentAccess` –Ω–∞ `_checkTournamentDeletionAccess`

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ - —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä
await this._checkTournamentDeletionAccess(tournamentId, userId);
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ API endpoint `/api/tournaments/:id` —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –Ω–µ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Ç—É—Ä–Ω–∏—Ä—ã
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ù–∞ VDS —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@80.87.200.23

# 2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/1337community.com/

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git pull origin main

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend
pm2 restart 1337-backend

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 status
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∫–∞–∫ —Å–æ–∑–¥–∞—Ç–µ–ª—å —Ç—É—Ä–Ω–∏—Ä–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç—É—Ä–Ω–∏—Ä–∞
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
4. –ù–∞–∂–º–∏—Ç–µ "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä" –≤ —Å–µ–∫—Ü–∏–∏ "–û–ø–∞—Å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
5. –í–≤–µ–¥–∏—Ç–µ "—É–¥–∞–ª–∏—Ç—å" –≤ –ø–æ–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
6. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é"

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- ‚úÖ –°–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ —Å–ª–æ–≤–∞ "—É–¥–∞–ª–∏—Ç—å"
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

### –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä
- ‚úÖ –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä
- ‚úÖ –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 404/403

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (—Ä–æ—É—Ç middleware + —Å–µ—Ä–≤–∏—Å)
- –í–∞–ª–∏–¥–∞—Ü–∏—è ID —Ç—É—Ä–Ω–∏—Ä–∞
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–î–∞—Ç–∞:** 2025-01-25  
**–í–µ—Ä—Å–∏—è:** 1.1.1 