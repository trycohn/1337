# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –º–∏–∫—Å —Ç—É—Ä–Ω–∏—Ä —Å —É–∫–∞–∑–∞–Ω–∏–µ–º FACEIT ELO –∏–ª–∏ CS2 Premier Rank, —Ä–µ–π—Ç–∏–Ω–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥.

## –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `faceit_elo` –∏ `cs2_premier_rank` –≤ —Ç–∞–±–ª–∏—Ü—É `tournament_participants` –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —É—á–µ—Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@80.87.200.23
cd /var/www/1337community.com/
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
```bash
# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
git status
git log --oneline -5
```

### 3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –í—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é (–∑–∞–º–µ–Ω–∏—Ç–µ your_database_name –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è –±–∞–∑—ã)
sudo -u postgres psql -d your_database_name -f backend/migrations/add_rating_fields_to_tournament_participants.sql

# –ò–ª–∏ –µ—Å–ª–∏ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
su - postgres
psql -d your_database_name -f /var/www/1337community.com/backend/migrations/add_rating_fields_to_tournament_participants.sql
exit
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend —Å–µ—Ä–≤–∏—Å–∞
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º backend —Å–µ—Ä–≤–∏—Å
systemctl restart 1337-backend

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
systemctl status 1337-backend

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
journalctl -u 1337-backend -f --lines=50
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

#### 5.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
-- –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres psql -d your_database_name

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è
\d tournament_participants

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–¥–µ–∫—Å—ã
\di idx_tournament_participants_*

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
\d+ tournament_participants

-- –í—ã—Ö–æ–¥–∏–º
\q
```

#### 5.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
1. –ó–∞–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç –∏ —Å–æ–∑–¥–∞—Ç—å –º–∏–∫—Å —Ç—É—Ä–Ω–∏—Ä
2. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å FACEIT ELO
3. –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
4. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–º–∞–Ω–¥—ã —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É –∏ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —É—á—Ç–µ–Ω—ã

### 6. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

#### 6.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ backend
```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ backend –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u 1337-backend -f

# –°–º–æ—Ç—Ä–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
journalctl -u 1337-backend --lines=100
```

#### 6.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
SELECT tp.id, tp.name, tp.user_id, tp.faceit_elo, tp.cs2_premier_rank, tp.in_team,
       u.faceit_elo as user_faceit_elo, u.cs2_premier_rank as user_cs2_premier_rank,
       COALESCE(tp.faceit_elo, u.faceit_elo, 0) as faceit_rating_combined
FROM tournament_participants tp
LEFT JOIN users u ON tp.user_id = u.id
WHERE tp.tournament_id = [ID_–ú–ò–ö–°_–¢–£–†–ù–ò–†–ê]
ORDER BY tp.created_at;
```

#### 6.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥
```bash
# –í –ª–æ–≥–∞—Ö backend –∏—â–µ–º —Å—Ç—Ä–æ–∫–∏ —Å:
# "üéØ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–∞"
# "üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
# "üîΩ –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ—Å–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ"
# "üèÜ –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º"

grep -A 10 -B 5 "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–∞" /var/log/1337-backend.log
```

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `faceit_elo`, `cs2_premier_rank`, `in_team` –≤ `tournament_participants`
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤**: –û–±–Ω–æ–≤–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤**: –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (`COALESCE`)
4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É –≤ `/mix-generate-teams` –∏ `/form-teams`
5. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. **–ü–µ—Ä–µ–¥–∞—á–∞ ratingType**: –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–∏–ø–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
2. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤:
1. `tp.faceit_elo` (—Ä–µ–π—Ç–∏–Ω–≥ –∏–∑ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞) - –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. `u.faceit_elo` (—Ä–µ–π—Ç–∏–Ω–≥ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) - –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –Ω–µ —É–∫–∞–∑–∞–Ω
3. `0` (–±–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ) - –µ—Å–ª–∏ –æ–±–∞ –Ω–µ —É–∫–∞–∑–∞–Ω—ã

### –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
2. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ç–∏–ø—É —Ä–µ–π—Ç–∏–Ω–≥–∞ (FACEIT/Premier)
3. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "–∑–º–µ–π–∫–æ–π" –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–º–∞–Ω–¥
4. –£—á–∞—Å—Ç–Ω–∏–∫–∏, –Ω–µ –ø–æ–ø–∞–≤—à–∏–µ –≤ –∫–æ–º–∞–Ω–¥—ã, –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ `in_team = false`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∏ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–æ–ª–∂–Ω—ã:
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –£—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∫–æ–º–∞–Ω–¥
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ backend –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ 