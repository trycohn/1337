# üìä –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤ —Å MVP

**–í–µ—Ä—Å–∏—è:** 4.28.0  
**–î–∞—Ç–∞:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

---

## üéØ –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º MVP –∏ –ø–∞–Ω–µ–ª—å—é –ª–∏–¥–µ—Ä–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ MatchZy –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –º–∞—Ç—á–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫—Ä–∞—Å–∏–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞.

### ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **üèÜ MVP –¢—É—Ä–Ω–∏—Ä–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤–∑–≤–µ—à–µ–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ
2. **üìä –ü–∞–Ω–µ–ª—å –ª–∏–¥–µ—Ä–æ–≤** - —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤ –ø–æ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
   - Most Kills (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–±–∏–π—Å—Ç–≤)
   - Highest ADR (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–Ω –∑–∞ —Ä–∞—É–Ω–¥)
   - Best HS% (–ø—Ä–æ—Ü–µ–Ω—Ç headshot)
   - Best Accuracy (—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ç—Ä–µ–ª—å–±—ã)
   - Clutch King (–∫–ª–∞—á 1v1 –ø–æ–±–µ–¥)
   - Total Money (–æ–±—â–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫)

3. **üìà –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —Ç—É—Ä–Ω–∏—Ä–∞
4. **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ –º–∞—Ç—á–∞
5. **üé® –ö—Ä–∞—Å–∏–≤—ã–π UI** –≤ –º–æ–Ω–æ—Ö—Ä–æ–º–Ω–æ–π —Ç–µ–º–µ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

---

## üì¶ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Backend (8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

#### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **`tournament_player_stats`** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ç—É—Ä–Ω–∏—Ä–µ (37 –ø–æ–ª–µ–π)
- **`tournament_achievements`** - —Ç–æ–ø –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–ò–Ω–¥–µ–∫—Å—ã** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

#### 2. Repository Layer
- **`TournamentStatsRepository.js`** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - `upsertPlayerStats()` - –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - `recalculatePlayerMetrics()` - –ø–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
  - `calculateMVPRatings()` - —Ä–∞—Å—á–µ—Ç MVP —Ä–µ–π—Ç–∏–Ω–≥–∞
  - `determineMVP()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MVP —Ç—É—Ä–Ω–∏—Ä–∞
  - `getLeaderboard()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  - `getAllTournamentStats()` - –≤—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - `generateAchievements()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–ø-3 –ø–æ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `getTournamentSummary()` - —Å–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### 3. Service Layer
- **`TournamentStatsService.js`** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - `updateStatsAfterMatch()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –º–∞—Ç—á–∞
  - `finalizeTournament()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MVP –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
  - `getTournamentStats()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - `recalculateTournamentStats()` - –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç (–∞–¥–º–∏–Ω)

#### 4. Controller Layer
- **`TournamentStatsController.js`** - API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
  - `getTournamentStats()` - GET /api/tournaments/:id/stats
  - `getMVP()` - GET /api/tournaments/:id/stats/mvp
  - `getLeaderboard()` - GET /api/tournaments/:id/stats/leaderboard
  - `getPlayerStats()` - GET /api/tournaments/:id/stats/player/:userId
  - `recalculateStats()` - POST /api/tournaments/:id/stats/recalculate (–∞–¥–º–∏–Ω)
  - `finalizeTournament()` - POST /api/tournaments/:id/stats/finalize (–∞–¥–º–∏–Ω)

#### 5. API Routes
6 –Ω–æ–≤—ã—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints –≤ `/api/tournaments/:id/stats/*`

#### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MatchService
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ `TournamentStatsService.updateStatsAfterMatch()` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ç—á–∞

#### 7. –ú–∏–≥—Ä–∞—Ü–∏–∏ SQL
- **`20251013_add_tournament_stats.sql`** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –∏–Ω–¥–µ–∫—Å–æ–≤
- **`20251013_add_tournament_stats_trigger.sql`** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä (–æ—Ç–∫–ª—é—á–µ–Ω)

#### 8. –§–æ—Ä–º—É–ª–∞ MVP Rating

```javascript
MVP_Points = (
    Rating * 0.35 +           // HLTV Rating 2.0 (35%)
    (Kills/Deaths) * 0.20 +   // K/D Ratio (20%)
    ADR/100 * 0.15 +          // –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–Ω (15%)
    KAST * 0.15 +             // KAST % (15%)
    HS% * 0.10 +              // Headshot % (10%)
    Clutch_Success * 0.05     // Clutch 1v1 % (5%)
) * Match_Weight             // –í–µ—Å: min(matches_played, 5)
```

---

### Frontend (2 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

#### 1. TournamentStatsPanel Component
- **–ë–æ–ª—å—à–∞—è MVP –∫–∞—Ä—Ç–æ—á–∫–∞** (2x2) —Å:
  - –ê–≤–∞—Ç–∞—Ä –∏–≥—Ä–æ–∫–∞ —Å –∑–æ–ª–æ—Ç–æ–π —Ä–∞–º–∫–æ–π
  - –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä–æ–Ω–∞ üëë
  - 6 –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ (Rating, K/D, ADR, HS%, Kills, Matches)
  - –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω —Å –ø—É–ª—å—Å–∞—Ü–∏–µ–π
  
- **–ü–∞–Ω–µ–ª—å –ª–∏–¥–µ—Ä–æ–≤** (Grid 3x2) —Å:
  - 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ª–∏–¥–µ—Ä–æ–≤
  - Hover —ç—Ñ—Ñ–µ–∫—Ç—ã
  - –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  
- **–°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –≤–Ω–∏–∑—É:
  - –°—Ä–µ–¥–Ω–∏–π K/D —Ç—É—Ä–Ω–∏—Ä–∞
  - –°—Ä–µ–¥–Ω–∏–π ADR
  - –°—Ä–µ–¥–Ω–∏–π HS%
  - –í—Å–µ–≥–æ Ace (5k)

#### 2. TournamentStatsPanel.css
- –ú–æ–Ω–æ—Ö—Ä–æ–º–Ω–∞—è —Ç–µ–º–∞ (#000, #fff, #ff0000)
- –ê–Ω–∏–º–∞—Ü–∏–∏ (crown-float, mvp-glow, pulse)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (Desktop ‚Üí Tablet ‚Üí Mobile)
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫

#### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ TournamentResults
–ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã":
- **–ü–æ–∑–∏—Ü–∏—è:** –º–µ–∂–¥—É –ø–æ–¥–∏—É–º–æ–º –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –º–∞—Ç—á–µ–π
- **–£—Å–ª–æ–≤–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:** `tournament.status === 'completed' && tournament.lobby_enabled && tournament.game === 'Counter-Strike 2'`

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```
1. MatchZy webhook –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–∞—Ç—á–∞
   ‚Üì
2. player_match_stats —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
   ‚Üì
3. MatchService –∑–∞–≤–µ—Ä—à–∞–µ—Ç –º–∞—Ç—á
   ‚Üì
4. TournamentStatsService.updateStatsAfterMatch() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   ‚Üì
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ tournament_player_stats (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ)
   ‚Üì
6. –ü–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (K/D, ADR, HS%, etc)
   ‚Üì
7. –ü–µ—Ä–µ—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–∏—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (Rating, KAST)
   ‚Üì
8. –†–∞—Å—á–µ—Ç MVP —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
   ‚Üì
9. WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞:

```
–ê–¥–º–∏–Ω/–°–æ–∑–¥–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç: POST /api/tournaments/:id/stats/finalize
   ‚Üì
1. –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç MVP —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
   ‚Üì
2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MVP —Ç—É—Ä–Ω–∏—Ä–∞ (is_tournament_mvp = true)
   ‚Üì
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (—Ç–æ–ø-3 –ø–æ 8 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º)
   ‚Üì
4. tournament_achievements –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è
```

---

## üìä –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **Matches Played** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π
- **Rounds Played** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤
- **Wins / Losses** - –ø–æ–±–µ–¥—ã –∏ –ø–æ—Ä–∞–∂–µ–Ω–∏—è
- **Total Kills / Deaths / Assists** - K/D/A

### –§—Ä–∞–≥–≥–∏–Ω–≥
- **K/D Ratio** - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —É–±–∏–π—Å—Ç–≤ –∫ —Å–º–µ—Ä—Ç—è–º
- **Total Headshot Kills** - —É–±–∏–π—Å—Ç–≤ –≤ –≥–æ–ª–æ–≤—É
- **HS Percentage** - –ø—Ä–æ—Ü–µ–Ω—Ç headshot

### –¢–æ—á–Ω–æ—Å—Ç—å
- **Shots Fired / On Target** - –≤—ã—Å—Ç—Ä–µ–ª—ã –≤—Å–µ–≥–æ / –ø–æ–ø–∞–¥–∞–Ω–∏—è
- **Accuracy** - —Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ç—Ä–µ–ª—å–±—ã (%)

### –£—Ä–æ–Ω
- **Total Damage** - –≤–µ—Å—å –Ω–∞–Ω–µ—Å–µ–Ω–Ω—ã–π —É—Ä–æ–Ω
- **Average ADR** - —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–Ω –∑–∞ —Ä–∞—É–Ω–¥

### –≠–∫–æ–Ω–æ–º–∏–∫–∞
- **Total Money Earned** - –≤—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–µ–Ω–µ–≥
- **Total Equipment Value** - —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–Ω–∞—Ä—è–∂–µ–Ω–∏—è

### –ö–ª–∞—á–∏
- **Clutch 1v1 / 1v2** - attempts / won / rate
- **Entry Attempts / Wins** - entry fragging —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –£—Ç–∏–ª–∏—Ç–∞
- **Utility Damage** - —É—Ä–æ–Ω —É—Ç–∏–ª–∏—Ç–æ–π
- **Enemies Flashed** - –æ—Å–ª–µ–ø–ª–µ–Ω–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤
- **Flash Assists** - —Ñ–ª–µ—à –∞—Å—Å–∏—Å—Ç—ã

### –ú—É–ª—å—Ç–∏–∫–∏–ª–ª—ã
- **Enemy 5ks / 4ks / 3ks / 2ks** - ace, quad, triple, double kills

### –†–µ–π—Ç–∏–Ω–≥–∏
- **Average Rating** - —Å—Ä–µ–¥–Ω–∏–π HLTV Rating 2.0
- **Average KAST** - Kill/Assist/Survive/Trade %
- **Impact Rating** - —Å—Ä–µ–¥–Ω–∏–π Impact
- **MVP Rating** - –≤–∑–≤–µ—à–µ–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –¥–ª—è MVP

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ VDS

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@80.87.200.23
cd /var/www/1337community.com/
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
git pull origin main
```

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
sudo -u postgres psql -d tournament_db -f backend/migrations/20251013_add_tournament_stats.sql

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
# sudo -u postgres psql -d tournament_db -f backend/migrations/20251013_add_tournament_stats_trigger.sql
```

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
cd backend && npm install
cd ../frontend && npm install
```

### –®–∞–≥ 5: –°–±–æ—Ä–∫–∞ Frontend

```bash
cd frontend
npm run build
sudo cp -r build/* /var/www/html/1337community/
```

### –®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Backend
sudo systemctl restart 1337-backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
pm2 logs 1337-backend --lines 50

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx
sudo systemctl reload nginx
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints
curl http://localhost:3000/api/tournaments/1/stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
sudo -u postgres psql -d tournament_db -c "SELECT COUNT(*) FROM tournament_player_stats;"
sudo -u postgres psql -d tournament_db -c "SELECT COUNT(*) FROM tournament_achievements;"
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

1. –ó–∞–≤–µ—Ä—à–∏—Ç–µ –º–∞—Ç—á –≤ —Ç—É—Ä–Ω–∏—Ä–µ —á–µ—Ä–µ–∑ MatchZy webhook
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Backend: `pm2 logs 1337-backend | grep "TournamentStats"`
3. –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
   ```
   üìä [MatchService] –ó–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞ 123
   üìä [TournamentStats] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞ 123 –ø–æ—Å–ª–µ –º–∞—Ç—á–∞ 456
   üìà [TournamentStats] –ù–∞–π–¥–µ–Ω–æ 10 –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   ‚úÖ [TournamentStats] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—É—Ä–Ω–∏—Ä–∞ 123 —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
   ```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞
curl http://1337community.com/api/tournaments/1/stats

# –ü–æ–ª—É—á–µ–Ω–∏–µ MVP
curl http://1337community.com/api/tournaments/1/stats/mvp

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ Most Kills
curl "http://1337community.com/api/tournaments/1/stats/leaderboard?category=most_kills&limit=10"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Frontend

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π CS2 —Ç—É—Ä–Ω–∏—Ä —Å –ª–æ–±–±–∏
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã"
3. –î–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –±–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å MVP –∏ –ª–∏–¥–µ—Ä–∞–º–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞: `üìä [TournamentStatsPanel] –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞...`

### 4. –†—É—á–Ω–∞—è —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (–¥–ª—è –∞–¥–º–∏–Ω–∞)

```bash
# –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MVP –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)
curl -X POST http://1337community.com/api/tournaments/1/stats/finalize \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ)
curl -X POST http://1337community.com/api/tournaments/1/stats/recalculate \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–í—Ä–µ–º—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** < 50ms –Ω–∞ –∏–≥—Ä–æ–∫–∞
- **–í—Ä–µ–º—è –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Ç—É—Ä–Ω–∏—Ä–∞ (64 —É—á–∞—Å—Ç–Ω–∏–∫–∞):** ~5-7 —Å–µ–∫—É–Ω–¥
- **–í—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:** < 100ms (—Å –∏–Ω–¥–µ–∫—Å–∞–º–∏)

### API
- **GET /stats:** < 200ms
- **GET /stats/leaderboard:** < 150ms
- **POST /stats/recalculate:** 5-10 —Å–µ–∫—É–Ω–¥ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ç—É—Ä–Ω–∏—Ä–∞)

### Frontend
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** < 500ms
- **–†–∞–∑–º–µ—Ä TournamentStatsPanel.js:** ~8KB
- **–†–∞–∑–º–µ—Ä TournamentStatsPanel.css:** ~10KB

---

## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú–æ–Ω–æ—Ö—Ä–æ–º–Ω–∞—è —Ç–µ–º–∞
- **–§–æ–Ω:** #000 (—á–µ—Ä–Ω—ã–π), #111 (—Ç–µ–º–Ω–æ-—Å–µ—Ä—ã–π)
- **–¢–µ–∫—Å—Ç:** #fff (–±–µ–ª—ã–π), #999 (—Å–µ—Ä—ã–π)
- **–ê–∫—Ü–µ–Ω—Ç—ã:** #ff0000 (–∫—Ä–∞—Å–Ω—ã–π) –¥–ª—è MVP –∏ –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–ì—Ä–∞–Ω–∏—Ü—ã:** #333 (—Å–µ—Ä—ã–µ), #ff0000 (–∫—Ä–∞—Å–Ω—ã–µ –ø—Ä–∏ hover)

### –ê–Ω–∏–º–∞—Ü–∏–∏
- **crown-float:** –ø–ª–∞–≤–∞—é—â–∞—è –∫–æ—Ä–æ–Ω–∞ MVP (3s —Ü–∏–∫–ª)
- **mvp-glow:** –ø—É–ª—å—Å–∞—Ü–∏—è —Ñ–æ–Ω–∞ MVP –∫–∞—Ä—Ç–æ—á–∫–∏ (4s —Ü–∏–∫–ª)
- **spin:** –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏–Ω–Ω–µ—Ä (1s)

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- **Desktop (>1024px):** Grid 2x2 –¥–ª—è MVP + 3x2 –¥–ª—è –ª–∏–¥–µ—Ä–æ–≤
- **Tablet (768-1024px):** Stack –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ, grid 2x2 –¥–ª—è –ª–∏–¥–µ—Ä–æ–≤
- **Mobile (<768px):** –û–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞, —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è MVP –∫–∞—Ä—Ç–æ—á–∫–∞, grid 2x1

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (v4.28.1)
1. **–î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"** –≤ —Ç—É—Ä–Ω–∏—Ä —Å –ø–æ–ª–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
2. **–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** –≤ CSV/Excel
3. **–ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –∏–≥—Ä–æ–∫–æ–≤ –ø–æ —Ä–∞—É–Ω–¥–∞–º (Chart.js)

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (v4.29.0)
4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤** - "Compare" —Ä–µ–∂–∏–º –¥–ª—è 2-3 –∏–≥—Ä–æ–∫–æ–≤
5. **Achievement badges** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–∫–∏ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Leet Coins** - –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ MVP –∏ —Ç–æ–ø-3
7. **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–æ –≤—Ä–µ–º—è —Ç—É—Ä–Ω–∏—Ä–∞

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (v4.30.0+)
8. **ML –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ MVP** –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç—É—Ä–Ω–∏—Ä–∞
9. **Heatmaps** –ø–æ–∑–∏—Ü–∏–π –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–∞—Ö
10. **VOD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Å—Å—ã–ª–∫–∏ –Ω–∞ highlights MVP –º–æ–º–µ–Ω—Ç–æ–≤
11. **Tournament Performance Index** - –µ–¥–∏–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤
12. **Leaderboards** - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–æ–ø—ã MVP –ø–æ –≤—Å–µ–º —Ç—É—Ä–Ω–∏—Ä–∞–º

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–¢—Ä–µ–±—É–µ—Ç—Å—è MatchZy –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–æ–≤ —Å lobby_enabled
2. **–¢–æ–ª—å–∫–æ CS2** - –ø–æ–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è Counter-Strike 2
3. **–†—É—á–Ω–∞—è —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - MVP –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `/stats/finalize` (–º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
4. **–ù–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤** - —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è
5. **–ú–∏–Ω–∏–º—É–º 1 –º–∞—Ç—á** - –∏–≥—Ä–æ–∫–∏ –±–µ–∑ —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **–ü—É–±–ª–∏—á–Ω—ã–µ endpoints** –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
- ‚úÖ **–ê–¥–º–∏–Ω endpoints** –∑–∞—â–∏—â–µ–Ω—ã JWT + –ø—Ä–æ–≤–µ—Ä–∫–∞ creator/admin
- ‚úÖ **SQL injection protected** —á–µ—Ä–µ–∑ parametrized queries
- ‚úÖ **Input validation** –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
- ‚úÖ **Rate limiting** –Ω–∞ —É—Ä–æ–≤–Ω–µ Nginx (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
```
backend/
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ 20251013_add_tournament_stats.sql
‚îÇ   ‚îî‚îÄ‚îÄ 20251013_add_tournament_stats_trigger.sql
‚îú‚îÄ‚îÄ repositories/tournament/
‚îÇ   ‚îî‚îÄ‚îÄ TournamentStatsRepository.js
‚îú‚îÄ‚îÄ services/tournament/
‚îÇ   ‚îú‚îÄ‚îÄ TournamentStatsService.js
‚îÇ   ‚îî‚îÄ‚îÄ MatchService.js (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îú‚îÄ‚îÄ controllers/tournament/
‚îÇ   ‚îî‚îÄ‚îÄ TournamentStatsController.js
‚îî‚îÄ‚îÄ routes/tournament/
    ‚îî‚îÄ‚îÄ index.js (–æ–±–Ω–æ–≤–ª–µ–Ω)
```

### Frontend
```
frontend/src/
‚îú‚îÄ‚îÄ components/tournament/
‚îÇ   ‚îú‚îÄ‚îÄ TournamentStatsPanel.js
‚îÇ   ‚îú‚îÄ‚îÄ TournamentStatsPanel.css
‚îÇ   ‚îî‚îÄ‚îÄ TournamentResults.js (–æ–±–Ω–æ–≤–ª–µ–Ω)
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] Git pull –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `20251013_add_tournament_stats.sql`
- [ ] npm install (–µ—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ dependencies)
- [ ] npm run build (frontend)
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Ñ–∞–π–ª—ã –≤ /var/www/html/1337community/
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω 1337-backend (PM2)
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω Nginx
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ PM2 –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω API endpoint /stats
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç—É—Ä–Ω–∏—Ä–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –º–∞—Ç—á–∞

---

**–î–æ–∫—É–º–µ–Ω—Ç –∞–∫—Ç—É–∞–ª–µ–Ω –Ω–∞:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 4.28.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**

üèÜ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤ —Å MVP —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é!

