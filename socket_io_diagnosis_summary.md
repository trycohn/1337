# üö® SOCKET.IO –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê - –ù–ê–ô–î–ï–ù–û –†–ï–®–ï–ù–ò–ï ‚úÖ

**–î–∞—Ç–∞**: 30.01.2025  
**–°—Ç–∞—Ç—É—Å**: üéØ –ü—Ä–æ–±–ª–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞, —Ä–µ—à–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ  
**–ü—Ä–æ–±–ª–µ–º–∞**: WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç  
**–ü—Ä–∏—á–∏–Ω–∞**: ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx  

## ‚úÖ **–£–°–ü–ï–®–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê:**

### Backend Socket.IO: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û
```
‚úÖ Socket.IO –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
```

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: ‚ùå –ù–ï –ü–†–û–ö–°–ò–†–£–ï–¢ SOCKET.IO
**–°–∏–º–ø—Ç–æ–º—ã –≤—ã—è–≤–ª–µ–Ω—ã**: 
- `/test-socketio` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ JSON API
- `curl https://1337community.com/socket.io/` ‚Üí `400 Bad Request`
- Socket.IO –æ—à–∏–±–∫–∏: "Transport unknown"
- WebSocket –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ frontend –≤–º–µ—Å—Ç–æ backend

## üîß **–†–ï–®–ï–ù–ò–ï –ü–û–î–ì–û–¢–û–í–õ–ï–ù–û:**

### –§–∞–π–ª—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- `nginx_socketio_manual_fix.md` - –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `deploy_final_socketio_fix.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `socket_io_critical_fix_v2.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Nginx:
```nginx
location /socket.io/ {
    proxy_pass http://127.0.0.1:3000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_cache_bypass $http_upgrade;
}
```

## üéØ **–ù–ï–û–ë–•–û–î–ò–ú–´–ï –î–ï–ô–°–¢–í–ò–Ø:**

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É**:
   ```bash
   ssh root@80.87.200.23
   # –ü–∞—Ä–æ–ª—å: 01012006Fortnite!
   ```

2. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
   ```bash
   cd /var/www/1337community.com
   cat nginx_socketio_manual_fix.md
   # –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ñ–∞–π–ª–∞
   ```

3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx**:
   ```bash
   systemctl reload nginx
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É**:
   ```bash
   curl -I https://1337community.com/socket.io/
   # –î–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 200 OK –≤–º–µ—Å—Ç–æ 400 Bad Request
   ```

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| Backend Socket.IO | ‚úÖ OK | –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| HTTP API | ‚úÖ OK | –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3000 |
| Nginx –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API | ‚úÖ OK | `/api/*` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è |
| Nginx –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ Socket.IO | ‚ùå FAIL | `/socket.io/*` –∏–¥–µ—Ç –Ω–∞ frontend |
| WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | ‚ùå FAIL | –ò–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è |

**üéØ –í—ã–≤–æ–¥**: –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞—Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é! 