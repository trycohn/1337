# üìä –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï API –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –¢–£–†–ù–ò–†–ê

## üîß **–ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:**

### **1. –ù–æ–≤—ã–π API endpoint:**
- **–ú–∞—Ä—à—Ä—É—Ç:** `GET /api/tournaments/:id/results`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏–∑ –ë–î
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –º–µ—Å—Ç–∞, –∏—Å—Ç–æ—Ä–∏—é –º–∞—Ç—á–µ–π

### **2. Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ `TournamentResultsService.js` - –°–µ—Ä–≤–∏—Å –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ `TournamentController.getTournamentResults` - API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç –≤ `routes/tournament/index.js`

### **3. Frontend –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `TournamentResults.js` 
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API –≤–º–µ—Å—Ç–æ props
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Å—Ç–∞ –∏–∑ –ë–î

## üöÄ **–ö–û–ú–ê–ù–î–´ –î–õ–Ø –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø:**

### **–®–∞–≥ 1: Backend**
```bash
# –ù–∞ VDS —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/1337community.com/backend

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl restart 1337-backend
sudo systemctl status 1337-backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo journalctl -u 1337-backend -f
```

### **–®–∞–≥ 2: Frontend**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ VDS
cd /var/www/1337community.com/frontend

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo systemctl reload nginx
```

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ API**
```bash
# –¢–µ—Å—Ç –Ω–æ–≤–æ–≥–æ endpoint
curl -X GET "http://localhost:3001/api/tournaments/1/results" \
  -H "Content-Type: application/json"

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –ø–æ–ª–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
```

## üß™ **–ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –†–ê–ë–û–¢–£:**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API:**
- –û—Ç–∫—Ä–æ–π—Ç–µ `http://your-domain/api/tournaments/1/results`
- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON —Å –¥–∞–Ω–Ω—ã–º–∏:
```json
{
  "tournament": { ... },
  "participants": [ ... ],
  "matches": [ ... ],
  "statistics": Map { ... },
  "standings": [ ... ],
  "matchHistory": [ ... ]
}
```

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π —Ç—É—Ä–Ω–∏—Ä ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã"
- –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞–¥–ø–∏—Å—å "üìä –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤..."
- –ó–∞—Ç–µ–º –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```
üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—É—Ä–Ω–∏—Ä–∞ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ API: {
  tournamentId: 1,
  format: "double_elimination",
  totalMatches: 15,
  completedMatches: 8,
  standingsCount: 5,
  historyCount: 8
}
```

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú:**

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –æ—à–∏–±–∫—É**
**–ü—Ä–∏—á–∏–Ω—ã:**
- –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SQL –∑–∞–ø—Ä–æ—Å
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–∞/–∫–æ–ª–æ–Ω–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
sudo journalctl -u 1337-backend -n 50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
psql -h localhost -U postgres -d 1337community -c "SELECT 1;"
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"**
**–ü—Ä–∏—á–∏–Ω—ã:**
- API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- CORS –æ—à–∏–±–∫–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
curl -I http://localhost:3001/api/tournaments/1/results

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t
sudo systemctl status nginx
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω—É–ª–∏**
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π –≤ –ë–î
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ `winner_team_id`
- –ü—Ä–æ–±–ª–µ–º—ã —Å SQL –ª–æ–≥–∏–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –º–∞—Ç—á–∏
SELECT COUNT(*) FROM matches 
WHERE tournament_id = 1 AND status = 'completed' AND winner_team_id IS NOT NULL;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Ä—É—á–Ω—É—é
SELECT 
  tt.name,
  COUNT(CASE WHEN m.winner_team_id = tt.id THEN 1 END) as wins,
  COUNT(CASE WHEN (m.team1_id = tt.id OR m.team2_id = tt.id) AND m.winner_team_id != tt.id THEN 1 END) as losses
FROM tournament_teams tt
LEFT JOIN matches m ON (m.team1_id = tt.id OR m.team2_id = tt.id) 
  AND m.tournament_id = 1 AND m.status = 'completed'
WHERE tt.tournament_id = 1
GROUP BY tt.id, tt.name;
```

## üìã **–§–ê–ô–õ–´ –î–õ–Ø –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø:**

### **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/services/tournament/TournamentResultsService.js`
- `DEPLOY_TOURNAMENT_RESULTS_API.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/controllers/tournament/TournamentController.js`
- `backend/routes/tournament/index.js`
- `frontend/src/components/tournament/TournamentResults.js`
- `frontend/src/components/tournament/TournamentResults.css`
- `frontend/src/components/TournamentDetails.js`

## ‚úÖ **–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:**

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –ø–æ–±–µ–¥ –∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –º–µ—Å—Ç–∞** - —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã –ø–æ –º–µ—Å—Ç–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—É—Ä–Ω–∏—Ä–Ω–æ–π —Å–µ—Ç–∫–µ
- ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ë–î
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ç—É—Ä–Ω–∏—Ä–æ–≤

**–¢–µ–ø–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—É—Ä–Ω–∏—Ä–æ–≤ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏–∑ –ë–î!** üéâ