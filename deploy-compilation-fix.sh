#!/bin/bash

echo "üéâ –î–ï–ü–õ–û–ô: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ React"
echo "========================================================"

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ VDS
cd /var/www/1337community.com

echo "üì• –ü–æ–ª—É—á–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–∑ GitHub..."
git fetch origin main

echo "üîÑ –ü—Ä–∏–º–µ–Ω—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π..."
git reset --hard origin/main

echo "üî® –°–æ–±–∏—Ä–∞–µ–º –Ω–æ–≤—ã–π production build..."
cd frontend
npm run build

echo "üîß –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º backend —Å–µ—Ä–≤–µ—Ä..."
cd ..
sudo systemctl restart 1337-backend

echo "‚è≥ –ñ–¥–µ–º 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏..."
sleep 5

echo "‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å backend —Å–µ—Ä–≤–µ—Ä–∞..."
sudo systemctl status 1337-backend --no-pager -l

echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏..."
sudo journalctl -u 1337-backend -n 15 --no-pager | tail -10

echo ""
echo "üéâ –î–ï–ü–õ–û–ô –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô –ó–ê–í–ï–†–®–ï–ù!"
echo "==============================="
echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π"
echo "‚úÖ –£–¥–∞–ª–µ–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ToastContext –∏–º–ø–æ—Ä—Ç"
echo "‚úÖ –ù–æ–≤—ã–π production build: main.742a1394.js (280.69 kB)"
echo "‚úÖ Backend —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω"
echo ""
echo "üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è:"
echo "   - –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ gameHasMaps, getGameMaps, getDefaultMap"
echo "   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
echo "   - –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫"
echo ""
echo "üöÄ –°–∞–π—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!" 