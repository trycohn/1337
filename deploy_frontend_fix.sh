#!/bin/bash

# üîß –ü–†–ò–ú–ï–ù–ï–ù–ò–ï FRONTEND –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô SOCKET.IO v2.0
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è socketClient_final.js + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
# –ê–≤—Ç–æ—Ä: Senior Fullstack Developer

set -e

echo "üîß === –ü–†–ò–ú–ï–ù–ï–ù–ò–ï FRONTEND –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô v2.0 ==="
echo "üìÖ –î–∞—Ç–∞: $(date '+%Y-%m-%d %H:%M:%S')"
echo ""

echo "üö® –ü–†–û–ë–õ–ï–ú–ê: Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–µ Socket.IO –∫–ª–∏–µ–Ω—Ç—ã —Å HTTP/2 –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏"
echo "üí° –†–ï–®–ï–ù–ò–ï: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ω–æ–≤—ã–π socketClient_final.js –¥–ª—è HTTP/1.1"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [[ ! -d "/var/www/1337community.com" ]]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ VDS —Å–µ—Ä–≤–µ—Ä–µ 1337community.com"
    exit 1
fi

echo "üîß 1. –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê FRONTEND –°–¢–†–£–ö–¢–£–†–´"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é frontend
cd /var/www/1337community.com/frontend

echo "üìÅ –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $(pwd)"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞:"
if [[ ! -f "package.json" ]]; then
    echo "‚ùå package.json –Ω–µ –Ω–∞–π–¥–µ–Ω! –ù–µ–≤–µ—Ä–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è."
    exit 1
fi

if [[ ! -d "src" ]]; then
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è src –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    exit 1
fi

echo "‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞"

echo ""
echo "üîß 2. –ü–†–û–í–ï–†–ö–ê –ö–õ–Æ–ß–ï–í–´–• –§–ê–ô–õ–û–í"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ socketClient_final.js
if [[ ! -f "src/services/socketClient_final.js" ]]; then
    echo "‚ùå –§–∞–π–ª socketClient_final.js –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    echo "üìã –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ Git"
    exit 1
else
    echo "‚úÖ –§–∞–π–ª socketClient_final.js –Ω–∞–π–¥–µ–Ω"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
    if grep -q "Socket.IO Final" "src/services/socketClient_final.js"; then
        echo "‚úÖ socketClient_final.js —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"
    else
        echo "‚ö†Ô∏è socketClient_final.js –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –≤–µ—Ä—Å–∏–µ–π"
    fi
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:"

FILES_TO_CHECK=(
    "src/components/Layout.js"
    "src/hooks/tournament/useWebSocket.js"
    "src/components/Messenger.js"
    "src/components/TournamentDetails.js"
)

for file in "${FILES_TO_CHECK[@]}"; do
    if [[ -f "$file" ]]; then
        if grep -q "socketClient_final" "$file" 2>/dev/null; then
            echo "‚úÖ $file: –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ –Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç"
        else
            echo "‚ö†Ô∏è $file: –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–ª–∏–µ–Ω—Ç"
        fi
    else
        echo "‚ùå $file: —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
    fi
done

echo ""
echo "üîß 3. –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:"
if [[ -d "node_modules" ]]; then
    echo "‚úÖ node_modules –Ω–∞–π–¥–µ–Ω"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º socket.io-client
    if [[ -d "node_modules/socket.io-client" ]]; then
        SOCKET_VERSION=$(node -p "require('./node_modules/socket.io-client/package.json').version" 2>/dev/null || echo "unknown")
        echo "‚úÖ socket.io-client –≤–µ—Ä—Å–∏—è: $SOCKET_VERSION"
    else
        echo "‚ùå socket.io-client –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
    fi
else
    echo "‚ö†Ô∏è node_modules –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
fi

echo ""
echo "üîß 4. –£–°–¢–ê–ù–û–í–ö–ê/–û–ë–ù–û–í–õ–ï–ù–ò–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

echo "üì¶ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ npm..."
npm cache clean --force

echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
if npm install; then
    echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:"
REACT_VERSION=$(node -p "require('./node_modules/react/package.json').version" 2>/dev/null || echo "not found")
SOCKET_VERSION=$(node -p "require('./node_modules/socket.io-client/package.json').version" 2>/dev/null || echo "not found")

echo "üìä React –≤–µ—Ä—Å–∏—è: $REACT_VERSION"
echo "üìä Socket.IO Client –≤–µ—Ä—Å–∏—è: $SOCKET_VERSION"

echo ""
echo "üîß 5. –°–ë–û–†–ö–ê PRODUCTION –í–ï–†–°–ò–ò"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

echo "üèóÔ∏è –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏..."
if [[ -d "build" ]]; then
    rm -rf build
    echo "‚úÖ –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å–±–æ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∞"
fi

echo "üèóÔ∏è –°–±–æ—Ä–∫–∞ production –≤–µ—Ä—Å–∏–∏..."
if npm run build; then
    echo "‚úÖ Frontend —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ frontend"
    echo "üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã—à–µ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π"
    exit 1
fi

echo ""
echo "üîß 6. –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –°–ë–û–†–ö–ò"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

echo "üìÅ –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é build:"
if [[ -d "build" ]]; then
    echo "‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è build —Å–æ–∑–¥–∞–Ω–∞"
    echo "üìä –°–æ–¥–µ—Ä–∂–∏–º–æ–µ build:"
    ls -la build/ | head -10
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã
    if [[ -f "build/index.html" ]]; then
        echo "‚úÖ index.html –Ω–∞–π–¥–µ–Ω"
    else
        echo "‚ùå index.html –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ build"
    fi
    
    if [[ -d "build/static" ]]; then
        echo "‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è static –Ω–∞–π–¥–µ–Ω–∞"
        echo "üìä JS —Ñ–∞–π–ª—ã: $(find build/static -name "*.js" | wc -l)"
        echo "üìä CSS —Ñ–∞–π–ª—ã: $(find build/static -name "*.css" | wc -l)"
    else
        echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è static –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    fi
else
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è build –Ω–µ —Å–æ–∑–¥–∞–Ω–∞"
    exit 1
fi

echo ""
echo "üìã –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä build:"
BUILD_SIZE=$(du -sh build/ 2>/dev/null | cut -f1)
echo "üìä –†–∞–∑–º–µ—Ä build: $BUILD_SIZE"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Socket.IO –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Å–±–æ—Ä–∫–µ
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Socket.IO –≤ —Å–±–æ—Ä–∫–µ:"
if find build -name "*.js" -exec grep -l "socket\.io" {} \; | head -1 > /dev/null; then
    echo "‚úÖ Socket.IO –∫–æ–¥ –Ω–∞–π–¥–µ–Ω –≤ —Å–±–æ—Ä–∫–µ"
else
    echo "‚ö†Ô∏è Socket.IO –∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–±–æ—Ä–∫–µ"
fi

echo ""
echo "üîß 7. –ü–†–û–í–ï–†–ö–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –° BACKEND"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å backend:"
if curl -s --max-time 5 http://localhost:3000/test-socketio > /dev/null 2>&1; then
    echo "‚úÖ Backend –¥–æ—Å—Ç—É–ø–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ"
else
    echo "‚ö†Ô∏è Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ (—ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ)"
fi

echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Nginx:"
if curl -s --max-time 10 https://1337community.com/test-socketio > /dev/null 2>&1; then
    echo "‚úÖ Backend –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Nginx"
else
    echo "‚ö†Ô∏è Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Nginx"
fi

echo ""
echo "üîß 8. –§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"

echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é socketClient_final.js:"
if [[ -f "src/services/socketClient_final.js" ]]; then
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    if grep -q "transports.*websocket.*polling" "src/services/socketClient_final.js"; then
        echo "‚úÖ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã WebSocket + Polling –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"
    else
        echo "‚ö†Ô∏è –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"
    fi
    
    if grep -q "1337community.com" "src/services/socketClient_final.js"; then
        echo "‚úÖ URL production –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ"
    else
        echo "‚ö†Ô∏è URL production –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º"
    fi
    
    if grep -q "Socket.IO Final" "src/services/socketClient_final.js"; then
        echo "‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ"
    else
        echo "‚ö†Ô∏è –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å"
    fi
fi

echo ""
echo "üéâ FRONTEND –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø v2.0 –ü–†–ò–ú–ï–ù–ï–ù–´!"
echo "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"
echo ""
echo "üìã –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:"
echo "‚úÖ Layout.js: –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ socketClient_final.js (—É–±—Ä–∞–Ω–∞ –ø—Ä—è–º–∞—è —Å–≤—è–∑—å —Å —Ç–æ–∫–µ–Ω–∞–º–∏)"
echo "‚úÖ useWebSocket.js: –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ socketClient_final.js (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã)"
echo "‚úÖ Messenger.js: –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ socketClient_final.js (–µ–¥–∏–Ω—ã–π –∫–ª–∏–µ–Ω—Ç)"
echo "‚úÖ TournamentDetails.js: —É–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç socket.io-client"
echo "‚úÖ socketClient_final.js: HTTP/1.1 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–ª–∏–µ–Ω—Ç —Å fallback"
echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã"
echo "‚úÖ Production —Å–±–æ—Ä–∫–∞: —Å–æ–∑–¥–∞–Ω–∞ –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞"
echo ""
echo "üîó –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø:"
echo "- –í—Å–µ Socket.IO —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π singleton –∫–ª–∏–µ–Ω—Ç"
echo "- HTTP/1.1 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–ª—è WebSocket upgrade"
echo "- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ polling –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö WebSocket"
echo "- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ auth –ø–∞—Ä–∞–º–µ—Ç—Ä –≤–º–µ—Å—Ç–æ query"
echo "- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º '[Socket.IO Final]'"
echo "- –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ retry –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏"
echo ""
echo "üö® –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:"
echo "1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä: systemctl reload nginx"
echo "2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é (Ctrl+Shift+Del ‚Üí –í—Å–µ –≤—Ä–µ–º—è)"
echo "3. –û—Ç–∫—Ä–æ–π—Ç–µ https://1337community.com –≤ –±—Ä–∞—É–∑–µ—Ä–µ"
echo "4. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console"
echo "5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ '[Socket.IO Final] –ü–û–î–ö–õ–Æ–ß–ï–ù–û!' –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"
echo ""
echo "üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:"
echo "- WebSocket –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—á–µ–∑–Ω—É—Ç"
echo "- –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –ª–æ–≥–∏ '[Socket.IO Final]' –≤–º–µ—Å—Ç–æ –æ—à–∏–±–æ–∫"
echo "- –ß–∞—Ç, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ real-time —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ"
echo "- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å WebSocket –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∏—Ç—Å—è polling"
echo ""
echo "üìû –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –í –°–õ–£–ß–ê–ï –ü–†–û–ë–õ–ï–ú:"
echo "- –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞: –∏—â–∏—Ç–µ '[Socket.IO Final]' –ª–æ–≥–∏"
echo "- Network –≤–∫–ª–∞–¥–∫–∞: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ /socket.io/ –∑–∞–ø—Ä–æ—Å—ã"
echo "- Backend –ª–æ–≥–∏: pm2 logs 1337-backend"
echo "- Nginx –ª–æ–≥–∏: tail -f /var/log/nginx/error.log"
echo "" 